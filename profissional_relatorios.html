<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatórios - VidaPlus</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-heartbeat"></i>
                    VidaPlus
                </div>
            </div>
            <div class="nav-menu">
                <a href="prototipo_dashboard_profissional.html" class="nav-item">
                    <i class="fas fa-home"></i>
                    Início
                </a>
                <a href="profissional_agenda.html" class="nav-item">
                    <i class="fas fa-calendar-alt"></i>
                    Agenda
                </a>
                <a href="profissional_pacientes.html" class="nav-item">
                    <i class="fas fa-users"></i>
                    Pacientes
                </a>
                <a href="profissional_prontuarios.html" class="nav-item">
                    <i class="fas fa-file-medical"></i>
                    Prontuários
                </a>
                <a href="profissional_prescricoes.html" class="nav-item">
                    <i class="fas fa-prescription"></i>
                    Prescrições
                </a>
                <a href="profissional_relatorios.html" class="nav-item active">
                    <i class="fas fa-chart-bar"></i>
                    Relatórios
                </a>
                <a href="profissional_perfil.html" class="nav-item">
                    <i class="fas fa-user"></i>
                    Perfil
                </a>
                <a href="#" class="nav-item logout-link">
                    <i class="fas fa-sign-out-alt"></i>
                    Sair
                </a>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <header class="page-header">
                <div class="page-title">
                    <h1>Relatórios e Análises</h1>
                    <p>Acompanhe suas métricas e performance profissional</p>
                </div>
                <div class="user-profile">
                    <div class="profile-avatar">JS</div>
                    <div class="profile-info">
                        <h3>Dr. João Silva</h3>
                        <p>Médico Cardiologista</p>
                    </div>
                </div>
            </header>

            <div class="breadcrumb">
                <a href="prototipo_dashboard_profissional.html">Início</a>
                <span class="breadcrumb-separator">></span>
                <span>Relatórios</span>
            </div>

            <!-- Filtros de Período -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Período de Análise</h3>
                </div>
                <div class="period-filters">
                    <div class="period-buttons">
                        <button class="btn btn-secondary" onclick="setPeriod('7d')">7 dias</button>
                        <button class="btn btn-secondary active" onclick="setPeriod('30d')">30 dias</button>
                        <button class="btn btn-secondary" onclick="setPeriod('90d')">3 meses</button>
                        <button class="btn btn-secondary" onclick="setPeriod('1y')">1 ano</button>
                    </div>
                    <div class="custom-period">
                        <input type="date" id="startDate" value="2025-06-15">
                        <span>até</span>
                        <input type="date" id="endDate" value="2025-07-15">
                        <button class="btn btn-primary" onclick="applyCustomPeriod()">Aplicar</button>
                    </div>
                </div>
            </div>

            <!-- Métricas Principais -->
            <div class="grid grid-4">
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="metric-info">
                        <h3>142</h3>
                        <p>Consultas Realizadas</p>
                        <span class="metric-change positive">+12% vs mês anterior</span>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="metric-info">
                        <h3>89</h3>
                        <p>Pacientes Atendidos</p>
                        <span class="metric-change positive">+8% vs mês anterior</span>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="metric-info">
                        <h3>32min</h3>
                        <p>Tempo Médio/Consulta</p>
                        <span class="metric-change neutral">= vs mês anterior</span>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="metric-info">
                        <h3>4.8</h3>
                        <p>Avaliação Média</p>
                        <span class="metric-change positive">+0.2 vs mês anterior</span>
                    </div>
                </div>
            </div>

            <!-- Gráficos -->
            <div class="grid grid-2">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Consultas por Dia</h3>
                        <div class="chart-controls">
                            <button class="btn btn-secondary active" onclick="changeChartType('line')">Linha</button>
                            <button class="btn btn-secondary" onclick="changeChartType('bar')">Barras</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="consultasChart" width="400" height="200"></canvas>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Tipos de Consulta</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="tiposChart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>

            <!-- Análise de Pacientes -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Análise de Pacientes</h3>
                </div>
                <div class="grid grid-3">
                    <div class="analysis-card">
                        <h4>Faixa Etária</h4>
                        <div class="age-distribution">
                            <div class="age-group">
                                <span class="age-label">18-30 anos</span>
                                <div class="age-bar">
                                    <div class="age-fill" style="width: 15%"></div>
                                </div>
                                <span class="age-percent">15%</span>
                            </div>
                            <div class="age-group">
                                <span class="age-label">31-45 anos</span>
                                <div class="age-bar">
                                    <div class="age-fill" style="width: 35%"></div>
                                </div>
                                <span class="age-percent">35%</span>
                            </div>
                            <div class="age-group">
                                <span class="age-label">46-60 anos</span>
                                <div class="age-bar">
                                    <div class="age-fill" style="width: 40%"></div>
                                </div>
                                <span class="age-percent">40%</span>
                            </div>
                            <div class="age-group">
                                <span class="age-label">60+ anos</span>
                                <div class="age-bar">
                                    <div class="age-fill" style="width: 10%"></div>
                                </div>
                                <span class="age-percent">10%</span>
                            </div>
                        </div>
                    </div>

                    <div class="analysis-card">
                        <h4>Convênios</h4>
                        <div class="convenio-list">
                            <div class="convenio-item">
                                <span class="convenio-name">Unimed</span>
                                <span class="convenio-percent">45%</span>
                            </div>
                            <div class="convenio-item">
                                <span class="convenio-name">Bradesco Saúde</span>
                                <span class="convenio-percent">25%</span>
                            </div>
                            <div class="convenio-item">
                                <span class="convenio-name">Amil</span>
                                <span class="convenio-percent">20%</span>
                            </div>
                            <div class="convenio-item">
                                <span class="convenio-name">Particular</span>
                                <span class="convenio-percent">10%</span>
                            </div>
                        </div>
                    </div>

                    <div class="analysis-card">
                        <h4>Principais Diagnósticos</h4>
                        <div class="diagnosis-list">
                            <div class="diagnosis-item">
                                <span class="diagnosis-name">Hipertensão Arterial</span>
                                <span class="diagnosis-count">28 casos</span>
                            </div>
                            <div class="diagnosis-item">
                                <span class="diagnosis-name">Diabetes Mellitus</span>
                                <span class="diagnosis-count">18 casos</span>
                            </div>
                            <div class="diagnosis-item">
                                <span class="diagnosis-name">Dislipidemia</span>
                                <span class="diagnosis-count">15 casos</span>
                            </div>
                            <div class="diagnosis-item">
                                <span class="diagnosis-name">Arritmia Cardíaca</span>
                                <span class="diagnosis-count">12 casos</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Relatórios Disponíveis -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Relatórios Disponíveis</h3>
                </div>
                <div class="reports-grid">
                    <div class="report-card">
                        <div class="report-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="report-info">
                            <h4>Relatório de Consultas</h4>
                            <p>Detalhamento completo das consultas realizadas no período</p>
                        </div>
                        <div class="report-actions">
                            <button class="btn btn-primary" onclick="gerarRelatorio('consultas')">Gerar</button>
                            <button class="btn btn-secondary" onclick="baixarRelatorio('consultas')">Download</button>
                        </div>
                    </div>

                    <div class="report-card">
                        <div class="report-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="report-info">
                            <h4>Relatório de Pacientes</h4>
                            <p>Lista de pacientes atendidos com informações demográficas</p>
                        </div>
                        <div class="report-actions">
                            <button class="btn btn-primary" onclick="gerarRelatorio('pacientes')">Gerar</button>
                            <button class="btn btn-secondary" onclick="baixarRelatorio('pacientes')">Download</button>
                        </div>
                    </div>

                    <div class="report-card">
                        <div class="report-icon">
                            <i class="fas fa-prescription"></i>
                        </div>
                        <div class="report-info">
                            <h4>Relatório de Prescrições</h4>
                            <p>Medicamentos mais prescritos e análise farmacológica</p>
                        </div>
                        <div class="report-actions">
                            <button class="btn btn-primary" onclick="gerarRelatorio('prescricoes')">Gerar</button>
                            <button class="btn btn-secondary" onclick="baixarRelatorio('prescricoes')">Download</button>
                        </div>
                    </div>

                    <div class="report-card">
                        <div class="report-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="report-info">
                            <h4>Relatório Financeiro</h4>
                            <p>Análise de receitas por convênio e tipo de consulta</p>
                        </div>
                        <div class="report-actions">
                            <button class="btn btn-primary" onclick="gerarRelatorio('financeiro')">Gerar</button>
                            <button class="btn btn-secondary" onclick="baixarRelatorio('financeiro')">Download</button>
                        </div>
                    </div>

                    <div class="report-card">
                        <div class="report-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="report-info">
                            <h4>Relatório de Satisfação</h4>
                            <p>Avaliações dos pacientes e feedback recebido</p>
                        </div>
                        <div class="report-actions">
                            <button class="btn btn-primary" onclick="gerarRelatorio('satisfacao')">Gerar</button>
                            <button class="btn btn-secondary" onclick="baixarRelatorio('satisfacao')">Download</button>
                        </div>
                    </div>

                    <div class="report-card">
                        <div class="report-icon">
                            <i class="fas fa-calendar"></i>
                        </div>
                        <div class="report-info">
                            <h4>Relatório de Agenda</h4>
                            <p>Análise de ocupação da agenda e horários disponíveis</p>
                        </div>
                        <div class="report-actions">
                            <button class="btn btn-primary" onclick="gerarRelatorio('agenda')">Gerar</button>
                            <button class="btn btn-secondary" onclick="baixarRelatorio('agenda')">Download</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Metas e Objetivos -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Metas e Objetivos</h3>
                    <button class="btn btn-primary" onclick="definirMetas()">
                        <i class="fas fa-target"></i>
                        Definir Metas
                    </button>
                </div>
                <div class="goals-grid">
                    <div class="goal-card">
                        <div class="goal-header">
                            <h4>Consultas Mensais</h4>
                            <span class="goal-status achieved">Atingida</span>
                        </div>
                        <div class="goal-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 105%"></div>
                            </div>
                            <div class="progress-text">
                                <span>142 / 135</span>
                                <span>105%</span>
                            </div>
                        </div>
                    </div>

                    <div class="goal-card">
                        <div class="goal-header">
                            <h4>Avaliação Média</h4>
                            <span class="goal-status achieved">Atingida</span>
                        </div>
                        <div class="goal-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 96%"></div>
                            </div>
                            <div class="progress-text">
                                <span>4.8 / 5.0</span>
                                <span>96%</span>
                            </div>
                        </div>
                    </div>

                    <div class="goal-card">
                        <div class="goal-header">
                            <h4>Novos Pacientes</h4>
                            <span class="goal-status pending">Em Andamento</span>
                        </div>
                        <div class="goal-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 75%"></div>
                            </div>
                            <div class="progress-text">
                                <span>15 / 20</span>
                                <span>75%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="js/navigation.js"></script>
    <script>
        let currentPeriod = '30d';

        function setPeriod(period) {
            currentPeriod = period;
            document.querySelectorAll('.period-buttons .btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            navigation.showNotification(`Período alterado para: ${period}`, 'info');
            updateCharts();
        }

        function applyCustomPeriod() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            
            if (startDate && endDate) {
                navigation.showNotification(`Período personalizado aplicado: ${startDate} até ${endDate}`, 'success');
                updateCharts();
            } else {
                navigation.showNotification('Por favor, selecione as datas de início e fim', 'warning');
            }
        }

        function changeChartType(type) {
            document.querySelectorAll('.chart-controls .btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            navigation.showNotification(`Tipo de gráfico alterado para: ${type}`, 'info');
            updateCharts();
        }

        function updateCharts() {
            // Aqui seria implementada a lógica para atualizar os gráficos
            navigation.showNotification('Gráficos atualizados', 'success');
        }

        function gerarRelatorio(tipo) {
            navigation.showNotification(`Gerando relatório de ${tipo}...`, 'info');
            setTimeout(() => {
                navigation.showNotification(`Relatório de ${tipo} gerado com sucesso!`, 'success');
            }, 2000);
        }

        function baixarRelatorio(tipo) {
            navigation.showNotification(`Baixando relatório de ${tipo}...`, 'info');
            setTimeout(() => {
                navigation.showNotification(`Relatório de ${tipo} baixado!`, 'success');
            }, 1500);
        }

        function definirMetas() {
            navigation.navigateTo('profissional_definir_metas.html');
        }

        // Simulação de gráficos simples
        function drawSimpleChart(canvasId, type = 'line') {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Dados simulados
            const data = [5, 8, 12, 15, 10, 18, 22, 16, 14, 20, 25, 19];
            const max = Math.max(...data);
            const width = canvas.width;
            const height = canvas.height;
            const padding = 40;
            
            // Desenha eixos
            ctx.strokeStyle = '#E5E7EB';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);
            ctx.stroke();
            
            // Desenha dados
            ctx.strokeStyle = '#2563EB';
            ctx.fillStyle = '#2563EB';
            ctx.lineWidth = 2;
            
            if (type === 'line') {
                ctx.beginPath();
                data.forEach((value, index) => {
                    const x = padding + (index * (width - 2 * padding) / (data.length - 1));
                    const y = height - padding - (value / max * (height - 2 * padding));
                    
                    if (index === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                });
                ctx.stroke();
            } else {
                data.forEach((value, index) => {
                    const x = padding + (index * (width - 2 * padding) / data.length);
                    const y = height - padding - (value / max * (height - 2 * padding));
                    const barWidth = (width - 2 * padding) / data.length * 0.8;
                    
                    ctx.fillRect(x, y, barWidth, height - padding - y);
                });
            }
        }

        // Inicializa gráficos quando a página carrega
        window.addEventListener('load', function() {
            drawSimpleChart('consultasChart', 'line');
            drawSimpleChart('tiposChart', 'bar');
        });
    </script>

    <style>
        .period-filters {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .period-buttons {
            display: flex;
            gap: 5px;
        }

        .period-buttons .btn.active {
            background: #2563EB;
            color: white;
        }

        .custom-period {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .custom-period input[type="date"] {
            padding: 8px 12px;
            border: 1px solid #D1D5DB;
            border-radius: 8px;
            font-size: 14px;
        }

        .metric-card {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            border: 1px solid #E5E7EB;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .metric-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #2563EB 0%, #1D4ED8 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .metric-info h3 {
            font-size: 24px;
            font-weight: 700;
            color: #1F2937;
            margin-bottom: 5px;
        }

        .metric-info p {
            font-size: 14px;
            color: #6B7280;
            margin-bottom: 5px;
        }

        .metric-change {
            font-size: 12px;
            font-weight: 600;
        }

        .metric-change.positive {
            color: #10B981;
        }

        .metric-change.negative {
            color: #EF4444;
        }

        .metric-change.neutral {
            color: #6B7280;
        }

        .chart-controls {
            display: flex;
            gap: 5px;
        }

        .chart-controls .btn.active {
            background: #2563EB;
            color: white;
        }

        .chart-container {
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .analysis-card {
            background: #F8FAFC;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #E5E7EB;
        }

        .analysis-card h4 {
            font-size: 16px;
            font-weight: 600;
            color: #1F2937;
            margin-bottom: 15px;
        }

        .age-distribution {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .age-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .age-label {
            font-size: 12px;
            color: #6B7280;
            min-width: 80px;
        }

        .age-bar {
            flex: 1;
            height: 8px;
            background: #E5E7EB;
            border-radius: 4px;
            overflow: hidden;
        }

        .age-fill {
            height: 100%;
            background: linear-gradient(90deg, #2563EB 0%, #1D4ED8 100%);
        }

        .age-percent {
            font-size: 12px;
            font-weight: 600;
            color: #1F2937;
            min-width: 30px;
        }

        .convenio-list,
        .diagnosis-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .convenio-item,
        .diagnosis-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #E5E7EB;
        }

        .convenio-item:last-child,
        .diagnosis-item:last-child {
            border-bottom: none;
        }

        .convenio-name,
        .diagnosis-name {
            font-size: 14px;
            color: #374151;
        }

        .convenio-percent,
        .diagnosis-count {
            font-size: 14px;
            font-weight: 600;
            color: #1F2937;
        }

        .reports-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .report-card {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            border: 1px solid #E5E7EB;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .report-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .report-info {
            flex: 1;
        }

        .report-info h4 {
            font-size: 16px;
            font-weight: 600;
            color: #1F2937;
            margin-bottom: 5px;
        }

        .report-info p {
            font-size: 14px;
            color: #6B7280;
        }

        .report-actions {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .report-actions .btn {
            padding: 6px 12px;
            font-size: 14px;
        }

        .goals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .goal-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #E5E7EB;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .goal-header h4 {
            font-size: 16px;
            font-weight: 600;
            color: #1F2937;
        }

        .goal-status.achieved {
            background: #D1FAE5;
            color: #065F46;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }

        .goal-status.pending {
            background: #FEF3C7;
            color: #92400E;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }

        .goal-progress {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .progress-bar {
            height: 8px;
            background: #E5E7EB;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10B981 0%, #059669 100%);
            transition: width 0.3s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
        }

        .progress-text span:first-child {
            color: #6B7280;
        }

        .progress-text span:last-child {
            color: #1F2937;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .period-filters {
                flex-direction: column;
                align-items: stretch;
            }

            .period-buttons {
                justify-content: center;
            }

            .custom-period {
                justify-content: center;
                flex-wrap: wrap;
            }

            .reports-grid {
                grid-template-columns: 1fr;
            }

            .report-card {
                flex-direction: column;
                text-align: center;
            }

            .report-actions {
                flex-direction: row;
                justify-content: center;
            }
        }
    </style>
</body>
</html>

